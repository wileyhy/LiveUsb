#!/bin/env -iS bash -euvx

## Note: use `env -i` or else the script's execution environment will inherit any exported anything, 
#+  including functions, from its caller, e.g., any locally defined functions which might be intended
#+  to supercede any aliases which the various distributions define and commonly provide for users
#+  convenience

## Q: Will line numbers print correctly?

declare -n nL=LINENO

function er_x()
{
  local - fn_exit_code=$?
  : "$@"
  builtin exit "${fn_exit_code}"
}

shopt -s expand_aliases
alias alias_erx='er_x "line ${nL}"'

function foo()
{
  local -
  : 'Printed strings, ie, no aliases'
  (( $#                             == 1 )) && er_x "line ${nL}"
  : 'Using alias'
  (( $#                             == 2 )) && alias_erx
  echo count $#
}

#foo alias_n

foo alias_y alias_y


